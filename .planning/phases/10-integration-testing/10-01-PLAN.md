---
phase: 10-integration-testing
plan: 01
type: execute
depends_on: []
files_modified:
  - examples/hello_python/plugin.py
  - examples/hello_python/plugin.json
  - examples/hello_python/requirements.txt
  - examples/hello_python/README.md
---

<objective>
Create a complete example Python plugin demonstrating the SDK's capabilities.

Purpose: Provide a working reference implementation for plugin developers, validating that all SDK components work together correctly.
Output: A functional example plugin with manifest, entry point, and documentation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context
@.planning/phases/07-python-hook-system/07-01-SUMMARY.md (hook decorator pattern)
@.planning/phases/09-manifest-extension/09-01-SUMMARY.md (manifest format)

# SDK examples from __init__.py
@python-sdk/src/mattermost_plugin/__init__.py

# Existing Go plugin examples for pattern reference
@server/public/plugin/example_hello_world_test.go

**Tech stack available:** Python SDK with gRPC, @hook decorator, Plugin base class
**Established patterns:** @hook(HookName.X) decorator, Plugin subclass, manifest.json with Server.Runtime="python"
**Constraining decisions:**
- Phase 07-01: @hook decorator with HookName enum
- Phase 09-01: manifest.json uses Server.Runtime="python" and Server.Python.EntryPoint
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create example plugin directory structure and manifest</name>
  <files>examples/hello_python/plugin.json</files>
  <action>
Create the example plugin directory at repository root: `examples/hello_python/`

Create `plugin.json` manifest following the Phase 9 schema:
```json
{
  "id": "com.mattermost.hello-python",
  "name": "Hello Python",
  "description": "Example Python plugin demonstrating the SDK",
  "homepage_url": "https://github.com/mattermost/mattermost",
  "support_url": "https://github.com/mattermost/mattermost/issues",
  "version": "0.1.0",
  "min_server_version": "10.0.0",
  "server": {
    "runtime": "python",
    "python_version": ">=3.9",
    "python": {
      "entry_point": "plugin.py"
    }
  }
}
```

Key points:
- Use `server.runtime: "python"` (not executable)
- Use `server.python.entry_point` for the Python file
- Match schema from Phase 9-01 ManifestServer/ManifestPython structs
  </action>
  <verify>cat examples/hello_python/plugin.json | python3 -c "import json, sys; json.load(sys.stdin); print('Valid JSON')"</verify>
  <done>plugin.json exists with correct Python runtime fields</done>
</task>

<task type="auto">
  <name>Task 2: Implement example plugin with multiple hooks</name>
  <files>examples/hello_python/plugin.py, examples/hello_python/requirements.txt</files>
  <action>
Create `plugin.py` demonstrating SDK capabilities:

1. Import SDK components:
```python
from mattermost_plugin import Plugin, hook, HookName
from mattermost_plugin.server import run_plugin
```

2. Define plugin class with hooks:
   - `OnActivate`: Log activation, call `self.api.get_server_version()`
   - `OnDeactivate`: Log deactivation
   - `MessageWillBePosted`: Simple filter (e.g., log message or add prefix)
   - `ExecuteCommand`: Implement `/hello` command that responds with greeting

3. Add `if __name__ == "__main__":` block calling `run_plugin(MyPlugin)`

4. Create `requirements.txt`:
```
mattermost-plugin-sdk>=0.1.0
```

Reference the pattern from `python-sdk/src/mattermost_plugin/__init__.py` docstring.

Keep the example simple but comprehensive enough to demonstrate:
- Hook decorator usage
- API client access via `self.api`
- Logger usage via `self.logger`
- Return value semantics (post modification, command responses)
  </action>
  <verify>cd examples/hello_python && python3 -c "import ast; ast.parse(open('plugin.py').read()); print('Valid Python')"</verify>
  <done>plugin.py exists with OnActivate, OnDeactivate, MessageWillBePosted, and ExecuteCommand hooks</done>
</task>

<task type="auto">
  <name>Task 3: Add example plugin README</name>
  <files>examples/hello_python/README.md</files>
  <action>
Create `README.md` documenting:

1. **Overview**: What this example demonstrates
2. **Prerequisites**: Python 3.9+, Mattermost server with Python plugin support
3. **Installation**:
   - Create virtualenv: `python3 -m venv venv`
   - Install SDK: `pip install -e ../../python-sdk`
   - (Production: `pip install mattermost-plugin-sdk`)
4. **Plugin Structure**: Explain plugin.json and plugin.py
5. **Hooks Demonstrated**:
   - OnActivate/OnDeactivate for lifecycle
   - MessageWillBePosted for message filtering
   - ExecuteCommand for slash commands
6. **Running**: How to package and install in Mattermost (note: full plugin packaging is future work, this documents the Python side)

Keep it concise but informative. Target audience: developers wanting to create Python plugins.
  </action>
  <verify>test -f examples/hello_python/README.md && head -5 examples/hello_python/README.md</verify>
  <done>README.md exists with installation and usage instructions</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `examples/hello_python/plugin.json` is valid JSON with Python runtime fields
- [ ] `examples/hello_python/plugin.py` parses as valid Python
- [ ] `examples/hello_python/plugin.py` imports from `mattermost_plugin` module
- [ ] `examples/hello_python/requirements.txt` lists SDK dependency
- [ ] `examples/hello_python/README.md` provides clear documentation
</verification>

<success_criteria>

- All tasks completed
- Example plugin directory structure is complete
- Plugin demonstrates 4+ hooks (OnActivate, OnDeactivate, MessageWillBePosted, ExecuteCommand)
- Documentation explains SDK usage patterns
</success_criteria>

<output>
After completion, create `.planning/phases/10-integration-testing/10-01-SUMMARY.md`:

# Phase 10 Plan 01: Example Python Plugin Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `examples/hello_python/plugin.json` - Plugin manifest
- `examples/hello_python/plugin.py` - Plugin implementation
- `examples/hello_python/requirements.txt` - Dependencies
- `examples/hello_python/README.md` - Documentation

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 10-02-PLAN.md (Integration test suite)
</output>
