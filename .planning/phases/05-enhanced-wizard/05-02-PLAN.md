---
phase: 05-enhanced-wizard
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - webapp/channels/src/components/create_recap_modal/day_of_week_selector.tsx
  - webapp/channels/src/components/create_recap_modal/create_recap_modal.scss
autonomous: true

must_haves:
  truths:
    - "User can click day buttons to select/deselect days"
    - "Selected days are visually distinct from unselected"
    - "Multiple days can be selected simultaneously"
    - "Component uses bitmask values matching server model"
  artifacts:
    - path: "webapp/channels/src/components/create_recap_modal/day_of_week_selector.tsx"
      provides: "DayOfWeekSelector component with bitmask state"
      exports: ["DayOfWeekSelector"]
    - path: "webapp/channels/src/components/create_recap_modal/create_recap_modal.scss"
      provides: "Styles for day selector buttons"
      contains: "day-selector"
  key_links:
    - from: "day_of_week_selector.tsx"
      to: "schedule_display.tsx bitmask constants"
      via: "matching bitmask values"
      pattern: "Sunday = 1.*Monday = 2"
---

<objective>
Create DayOfWeekSelector component for multi-day selection

Purpose: Step 3 needs a day picker where users can select multiple days (M/T/W/Th/F/Sa/Su). This is a reusable component using bitmask values matching the server model.

Output: Styled button group component with toggle state for each day
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-enhanced-wizard/05-RESEARCH.md

Reference files:
@webapp/channels/src/components/recaps/schedule_display.tsx (bitmask constants and DAYS array)
@webapp/channels/src/components/create_recap_modal/create_recap_modal.scss (existing styles)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DayOfWeekSelector component</name>
  <files>webapp/channels/src/components/create_recap_modal/day_of_week_selector.tsx</files>
  <action>
Create a new component for selecting days of week using bitmask:

```typescript
// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.
// See LICENSE.txt for license information.

import React from 'react';
import {useIntl} from 'react-intl';
import classNames from 'classnames';

// Day-of-week bitmask constants (matching Go model and schedule_display.tsx)
const Sunday = 1 << 0;    // 1
const Monday = 1 << 1;    // 2
const Tuesday = 1 << 2;   // 4
const Wednesday = 1 << 3; // 8
const Thursday = 1 << 4;  // 16
const Friday = 1 << 5;    // 32
const Saturday = 1 << 6;  // 64

type DayInfo = {
    bit: number;
    labelKey: string;
    shortLabel: string;
};

// Order: Monday first (more intuitive for work schedules)
const DAYS: DayInfo[] = [
    {bit: Monday, labelKey: 'recaps.days.monday', shortLabel: 'M'},
    {bit: Tuesday, labelKey: 'recaps.days.tuesday', shortLabel: 'T'},
    {bit: Wednesday, labelKey: 'recaps.days.wednesday', shortLabel: 'W'},
    {bit: Thursday, labelKey: 'recaps.days.thursday', shortLabel: 'Th'},
    {bit: Friday, labelKey: 'recaps.days.friday', shortLabel: 'F'},
    {bit: Saturday, labelKey: 'recaps.days.saturday', shortLabel: 'Sa'},
    {bit: Sunday, labelKey: 'recaps.days.sunday', shortLabel: 'Su'},
];

type Props = {
    value: number;  // Bitmask of selected days
    onChange: (value: number) => void;
    disabled?: boolean;
    error?: boolean;
};

const DayOfWeekSelector = ({value, onChange, disabled, error}: Props) => {
    const {formatMessage} = useIntl();

    const toggleDay = (dayBit: number) => {
        if (disabled) {
            return;
        }
        // XOR to toggle the bit
        onChange(value ^ dayBit);
    };

    const isDaySelected = (dayBit: number): boolean => {
        return (value & dayBit) !== 0;
    };

    return (
        <div className={classNames('day-of-week-selector', {error})}>
            {DAYS.map((day) => (
                <button
                    key={day.bit}
                    type='button'
                    className={classNames('day-button', {
                        selected: isDaySelected(day.bit),
                        disabled,
                    })}
                    onClick={() => toggleDay(day.bit)}
                    disabled={disabled}
                    aria-pressed={isDaySelected(day.bit)}
                    aria-label={formatMessage({id: day.labelKey, defaultMessage: day.shortLabel})}
                >
                    {day.shortLabel}
                </button>
            ))}
        </div>
    );
};

export default DayOfWeekSelector;
```

Key design decisions:
- Bitmask constants match server model exactly (Sunday=1, Monday=2, etc.)
- Days ordered Monday-first for work schedule intuition
- XOR toggle for clean state management
- aria-pressed for accessibility
- Error state for validation feedback
  </action>
  <verify>test -f webapp/channels/src/components/create_recap_modal/day_of_week_selector.tsx && grep -q "DayOfWeekSelector" webapp/channels/src/components/create_recap_modal/day_of_week_selector.tsx</verify>
  <done>DayOfWeekSelector component exists with bitmask-based day selection</done>
</task>

<task type="auto">
  <name>Task 2: Add styles for DayOfWeekSelector</name>
  <files>webapp/channels/src/components/create_recap_modal/create_recap_modal.scss</files>
  <action>
Add styles at the end of the file, before the closing brace of `.create-recap-modal`:

```scss
    // Day of Week Selector Styles
    .day-of-week-selector {
        display: flex;
        gap: 8px;

        &.error {
            .day-button:not(.selected) {
                border-color: var(--error-text);
            }
        }

        .day-button {
            display: flex;
            width: 40px;
            height: 40px;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(var(--center-channel-color-rgb), 0.16);
            border-radius: 4px;
            background-color: var(--center-channel-bg);
            color: var(--center-channel-color);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.15s ease;

            &:hover:not(.disabled) {
                background-color: rgba(var(--center-channel-color-rgb), 0.04);
                border-color: rgba(var(--center-channel-color-rgb), 0.32);
            }

            &.selected {
                border-color: var(--button-bg);
                background-color: var(--button-bg);
                color: var(--button-color);

                &:hover:not(.disabled) {
                    background-color: var(--button-bg-hover, var(--button-bg));
                }
            }

            &.disabled {
                cursor: not-allowed;
                opacity: 0.5;
            }
        }
    }
```

Place these styles inside the `.create-recap-modal` block to maintain CSS scoping.
  </action>
  <verify>grep -q "day-of-week-selector" webapp/channels/src/components/create_recap_modal/create_recap_modal.scss</verify>
  <done>Day selector styles exist with selected state, hover effects, and error state</done>
</task>

</tasks>

<verification>
All tasks complete when:
1. day_of_week_selector.tsx exists and exports DayOfWeekSelector
2. Component uses bitmask constants matching server (Sunday=1, Monday=2, etc.)
3. Styles in scss file include .day-of-week-selector and .day-button classes
4. Selected state has distinct visual styling (button-bg color)
</verification>

<success_criteria>
- File exists at expected path
- Component exports DayOfWeekSelector
- Bitmask values match: Sunday=1, Monday=2, Tuesday=4, Wednesday=8, Thursday=16, Friday=32, Saturday=64
- SCSS includes day-of-week-selector styles
</success_criteria>

<output>
After completion, create `.planning/phases/05-enhanced-wizard/05-02-SUMMARY.md`
</output>
