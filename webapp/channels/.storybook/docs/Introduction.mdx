import {Meta} from '@storybook/addon-docs/blocks';

<Meta title="Introduction" />

# Mattermost Webapp Storybook

Welcome to the Mattermost Webapp component library! This Storybook showcases reusable UI components used throughout the Mattermost web application.

## üöÄ Current Status

This is a **Proof of Concept (POC)** implementation. We're actively expanding coverage to document and showcase more components.

## Overview

This Storybook provides:

- **Component Documentation** - Interactive documentation for reusable UI components
- **Live Examples** - Real-time component previews with adjustable props
- **Accessibility Testing** - Built-in a11y validation using the Accessibility addon
- **Responsive Design** - Test components across different viewport sizes
- **Theme Integration** - Components render with full Mattermost styles and CSS variables

## Architecture

### Technology Stack

- **React 18** - UI components and hooks
- **TypeScript** - Type safety across the codebase
- **SCSS** - Traditional stylesheets with sass-loader
- **Styled Components** - Dynamic styling with CSS-in-JS (At least while we remove it from the codebase üíÄ üî™ ‚ö∞Ô∏è ‚ò†Ô∏è ü™¶)
- **React Intl** - Internationalization (i18n) support
- **React Router** - Navigation context for components

### Monorepo Structure

This Storybook spans multiple workspace packages:

```
webapp/
‚îú‚îÄ‚îÄ channels/                    # Main webapp package
‚îÇ   ‚îî‚îÄ‚îÄ src/**/*.stories.tsx    # Channel-specific components
‚îú‚îÄ‚îÄ platform/
‚îÇ   ‚îú‚îÄ‚îÄ components/             # Shared platform components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/**/*.stories.tsx
‚îÇ   ‚îî‚îÄ‚îÄ design-system/          # Design system primitives
‚îÇ       ‚îî‚îÄ‚îÄ src/**/*.stories.tsx
```

All stories are **co-located** with their components for better maintainability.


## Getting Started

### Browsing Components

1. **Sidebar Navigation** - Browse components by category
2. **Canvas Tab** - Interactive preview with editable props via Controls
3. **Docs Tab** - Auto-generated documentation with prop tables
4. **Accessibility Tab** - A11y validation results

### Component Stories

Each component includes multiple story variants:
- **Default** - Basic usage example
- **Variants** - Different visual styles
- **States** - Loading, disabled, error states
- **Interactive** - Real-world usage scenarios

## Development Guidelines

### ‚úÖ Best Practices

When creating new stories, follow these guidelines:

#### 1. **Co-locate Stories with Components**

```
‚úÖ DO THIS:
src/components/widgets/tag/
‚îú‚îÄ‚îÄ tag.tsx
‚îú‚îÄ‚îÄ tag.stories.tsx    ‚Üê Story alongside component
‚îú‚îÄ‚îÄ tag.test.tsx
‚îî‚îÄ‚îÄ tag.scss

#### 2. **Use Descriptive Story Names**

```typescript
// Good - describes the variant clearly
export const SuccessState: Story = { ... };
export const WithLongText: Story = { ... };
export const InteractiveExample: Story = { ... };

// Avoid - too generic
export const Story1: Story = { ... };
export const Test: Story = { ... };
```

#### 3. **Document Props with TypeScript**

```typescript
interface ButtonProps {
  /** Size variant of the button */
  size?: 'xs' | 'sm' | 'md' | 'lg';

  /** Whether the button represents a destructive action */
  destructive?: boolean;
}
```

#### 4. **Include Multiple Variants**

Show different use cases:
- Visual variants (colors, sizes)
- States (loading, disabled, error)
- Interactive examples
- Edge cases (long text, empty state)

#### 5. **File Naming Convention**

- Use snake_case: `button.stories.tsx` (matches component file)
- Stories auto-discovered by `**/*.stories.tsx` pattern

### Story File Template

```typescript
import React from 'react';
import type {Meta, StoryObj} from '@storybook/react';

import YourComponent from './your_component';

const meta: Meta<typeof YourComponent> = {
    title: 'Category/YourComponent',
    component: YourComponent,
    tags: ['autodocs'],
    argTypes: {
        variant: {
            control: 'select',
            options: ['default', 'primary', 'secondary'],
        },
    },
};

export default meta;
type Story = StoryObj<typeof YourComponent>;

export const Default: Story = {
    args: {
        variant: 'default',
    },
};
```

## Technical Details

### Build System

- **Webpack 5** - Module bundling with full SCSS support
- **Babel** - TypeScript transpilation
- **Sass Loader** - SCSS compilation with proper `loadPaths`

### Styling Approach

Components render with full Mattermost styles:

1. **Main SCSS** - All webapp styles (`src/sass/styles.scss`)
2. **CSS Variables** - Design tokens for theming
3. **Component SCSS** - Module-specific styles
4. **Styled Components** - Dynamic CSS-in-JS

### Context Providers

Stories run with these providers:
- **IntlProvider** - i18n with English translations
- **React Router** - Navigation context with memory history
- **`.app__body` wrapper** - Proper CSS scoping

No Redux provider (components should be presentational).

## CI/CD Integration

Story files are part of the development workflow:

- ‚úÖ **Linted** - ESLint validates all story files
- ‚úÖ **Type-checked** - TypeScript validates stories
- ‚úÖ **Excluded from builds** - Not compiled to production
- ‚úÖ **CI validation** - Checked in GitHub Actions

## Resources Storybook

- [Storybook Documentation](https://storybook.js.org/docs/react/)
- [Writing Stories](https://storybook.js.org/docs/react/writing-stories)
