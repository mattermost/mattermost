// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.
// See LICENSE.txt for license information.

.UserSection {
    display: flex;
    justify-content: center;
    align-items: center;

    // Override UserAccountMenu button styling for sidebar context
    .userAccountMenu_menuButton {
        padding: 4px;
        margin: 0;
        background: transparent;
        border-radius: var(--radius-s, 4px);

        // Hover and expanded states
        &:hover,
        &[aria-expanded="true"] {
            background: rgba(var(--sidebar-text-rgb), 0.08);

            .userStatusIconWrapper {
                background-image: linear-gradient(
                    0deg,
                    rgba(var(--sidebar-text-rgb), 0.08),
                    rgba(var(--sidebar-text-rgb), 0.08)
                );
            }
        }

        // Custom status background override
        &.withCustomStatus {
            background: rgba(var(--sidebar-text-rgb), 0.16);

            .userStatusIconWrapper {
                background-image: linear-gradient(
                    0deg,
                    rgba(var(--sidebar-text-rgb), 0.16),
                    rgba(var(--sidebar-text-rgb), 0.16)
                );
            }
        }
    }

    // Override status icon wrapper positioning for sidebar
    .userStatusIconWrapper {
        right: 0;
        bottom: -2px;

        // Use sidebar background color instead of global header
        background-color: var(--sidebar-header-bg);
        color: var(--sidebar-text);
    }
}

// Override MUI Popover positioning for UserAccountMenu in sidebar context
// The menu should appear to the right of the sidebar, not overlapping it
// This targets the MuiPopover that opens from the userAccountMenuButton within ProductSidebar
.ProductSidebar .MuiPopover-root .MuiPopover-paper {
    // Position menu to the right of the sidebar (64px wide)
    left: 64px !important;

    // Anchor menu to bottom of viewport minus some padding for the avatar
    // Adjust vertical position to align with avatar
    bottom: 8px !important;
    top: auto !important;

    // Transform origin should be bottom-left since menu opens to the right
    transform-origin: bottom left !important;
}
